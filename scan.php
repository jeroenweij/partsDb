<?php

require('scan2id.php');
require('nexarAPI.php');
require('header.php');
require('mysqlConn.php');

printHeader("Scan test");

?>
    <form action="scan.php" method="post">
        <input name="q" type="text" value="" autofocus />&nbsp;
        <input class="twohndrdpx" name="submit" type="submit" value="Zoek"/>
    </form>
<?php
if (isset($_POST["q"])) {
    $txt = $_POST['q'];
    $input = scan2id(validateInput($_POST["q"]));

    echo("<h4>$txt</h4>\n");
    echo("<h4>$input</h4>\n");
    echo("<p>[\"$txt\", \"$input\"],</p>\n");

} else {

    $data = [
        ["1P12345", "12345"],
        ["04121763", "04121763"],
        ["TPS2066CDR", "TPS2066CDR"],
        ["74438356022", "74438356022"],
        ["1P742792701", "742792701"],
        ["1P742792622", "742792622"],
        ["TPS62177DQCT", "TPS62177DQCT"],
        ["TPS62163DSGR", "TPS62163DSGR"],
        ["TPS56339DDCR", "TPS56339DDCR"],
        ["SRP6540-5R6M", "SRP6540-5R6M"],
        ["ESD8004MUTAG", "ESD8004MUTAG"],
        ["1P74279228600", "74279228600"],
        ["1P61400416021", "61400416021"],
        ["1P865060345006", "865060345006"],
        ["LG1002297547005", "LG1002297547005"],
        ["LG1002297547001", "LG1002297547001"],
        ["1P150060VS75000", "150060VS75000"],
        ["1P150044M155260", "150044M155260"],
        ["1PGRM188R61E475KE11D", "GRM188R61E475KE11D"],
        ["[)>?06?KE1436867-PP/PO117757?14K002?1PERJ-2GEJ122X?PE1436867-PP?Q20?11K069318739?4LCN?1VPanasonic??", "ERJ-2GEJ122X"],
        ["[)>?06?KE1436867-PP/PO117757?14K003?1P0603YD225MAT2A?PE1436867-PP?Q20?11K069318739?4LCN?1VKyocera AVX??", "0603YD225MAT2A"],
        ["[)>?06?KE1436867-PP/PO117757?14K001?1PABM11W-25.0000MHZ-4-D1X-T3?PE1436867-PP?Q15?11K069318739?4LTW?1VABRACON??", "ABM11W-25.0000MHZ-4-D1X-T3"],
        ["[)>?06?J64B1B52D.C9014CA5.86A9DA49.782238A0?P1727-2030-6-ND?1PPUSB3F96X?9D2031?14Z200726?1TCXT130?4LTH?11ZPREPACK?15Z1.0.1?12Z5221964?Q150?13Z0?20Z000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "PUSB3F96X"],
        ["[)>?06?J3478055C.BF6B4D11.B36010EE.7FCCD19CCD33?PW25Q80DVSNIG-ND?1PW25Q80DVSNIG?9D2139?14Z210926?1T6122DX100ZL?4LTW?11ZPREPACK?15Z1.0.1?12Z4878496?Q12?13Z0?20Z000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "W25Q80DVSNIG"],
        ["[)>?06?PE1436867-PP?1PRB751S40T1G?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q25?11ZPICK?12Z964628?13Z229973?20Z0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "RB751S40T1G"],
        ["[)>?06?PE1436867-PP?1PGRM1555C1H3R0CA01D?KE1436867-PP?1K77160310?10K91531851?11K1?4LJP?Q30?11ZPICK?12Z3175214?13Z229971?20Z00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "GRM1555C1H3R0CA01D"],
        ["[)>?06?PE1436867-PP?1PESD122DMXR?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q24?11ZPICK?12Z8567587?13Z229974?20Z0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ESD122DMXR"],
        ["[)>?06?PE1436867-PP?1PERJ-2RKF4022X?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q20?11ZPICK?12Z194391?13Z233240?20Z00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ERJ-2RKF4022X"],
        ["[)>?06?PE1436867-PP?1PERJ-2RKF2003X?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q40?11ZPICK?12Z194254?13Z233242?20Z00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ERJ-2RKF2003X"],
        ["[)>?06?PE1436867-PP?1PERJ-2RKF2000X?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q20?11ZPICK?12Z194253?13Z233241?20Z00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ERJ-2RKF2000X"],
        ["[)>?06?PE1436867-PP?1PABS05-32.768KHZ-9-T?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q15?11ZPICK?12Z3508069?13Z229968?20Z0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ABS05-32.768KHZ-9-T"],
        ["[)>?06?PE1436867-PP?1PABM3B-8.000MHZ-10-1-U-T?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q15?11ZPICK?12Z1873255?13Z229969?20Z000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "ABM3B-8.000MHZ-10-1-U-T"],
        ["[)>?06?PE1436867-PP?1P2N7002-7-F?KE1436867-PP?1K77160310?10K91531851?11K1?4LCN?Q15?11ZPICK?12Z717800?13Z229972?20Z00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "2N7002-7-F"],

    ];
    ?>
    <table class="styled-table">
        <thead>
            <tr>
                <th>Input</th>
                <th>Output</th>
                <th>Expected</th>
            </tr>
        </thead>
        <tbody>
<?php
    foreach ($data as $value) {
        $output = scan2id(validateInput($value[0]));
        $style="";
        if( $output != $value[1]){
            $style="style='color: #ff0000'";
        }

        echo "<tr>\n";
        echo("<td $style>".substr($value[0],0,40)."</td>\n");
        echo("<td $style>$output</td>\n");
        echo("<td $style>".$value[1]."</td>\n");
        echo "</tr>\n";
    }

    echo("</tbody></table>\n");
}

printFooter();
